<!-- NOTA: L'intero wrapper ora gestisce i controlli di navigazione -->
<div class="album-wrapper">

    <!-- Controlli di Navigazione (si posizioneranno ai lati su desktop) -->
    <button (click)="previousPage()" [disabled]="currentPageIndex === 0" class="nav-button prev-button" aria-label="Pagina precedente">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" />
        </svg>
    </button>
    
    <div class="album-container" (touchstart)="handleTouchStart($event)" (touchmove)="handleTouchMove($event)" (touchend)="handleTouchEnd()">
        <div class="album">
            <!-- Pagine generate dinamicamente -->
            <div *ngFor="let page of pages; let i = index" class="page-container"
                [ngClass]="{ 'page--flipped': i < currentPageIndex }" [style.zIndex]="pages.length - i">
                <!-- Griglia di carte -->
                <div class="card-grid">
                    <div *ngFor="let card of page" class="card-slot" [class.empty-slot]="!card.imageUrl">
                        <img *ngIf="card.imageUrl" [src]="card.imageUrl" alt="Carta PokÃ©mon" class="card-image">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <button (click)="nextPage()" [disabled]="currentPageIndex === pages.length - 1" class="nav-button next-button" aria-label="Pagina successiva">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z" />
        </svg>
    </button>

    <!-- Controlli per il mobile (visibili solo su schermi piccoli) -->
    <div class="navigation-controls-mobile">
         <button (click)="previousPage()" [disabled]="currentPageIndex === 0" class="nav-button" aria-label="Pagina precedente">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" /></svg>
        </button>
         <button (click)="nextPage()" [disabled]="currentPageIndex === pages.length - 1" class="nav-button" aria-label="Pagina successiva">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z" /></svg>
        </button>
    </div>
</div>